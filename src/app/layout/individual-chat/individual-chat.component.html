<app-header></app-header>


<div class="login-area" style="padding: 40px 0;">
  <div class="container">
    <div class="row justify-content-center h-100">
      
      <div class="col-xs-12 col-sm-10 col-md-8 col-lg-8 chat mx-auto">
        <div class="card">
          <div class="card-header msg_head">
            <div class="d-flex bd-highlight">
              <div *ngIf="you['profilePic']==''" class="img_cont">
                <img src="assets/img/sampleuser.png" class="rounded-circle user_img">
                <span *ngIf="you['isOnline']" class="online_icon"></span>
                <span *ngIf="!you['isOnline']" class="offline_icon"></span>
              </div>
              <div *ngIf="you['profilePic']!=''" class="img_cont">
                <img src="http://mysite{{you['profilePic']}}" class="rounded-circle user_img">
                <span *ngIf="you['isOnline']" class="online_icon"></span>
                <span *ngIf="!you['isOnline']" class="offline_icon"></span>
              </div>
              <div class="user_info">
                <span>Chat with {{you['name']}}</span>
                
              </div>
              <div class="video_cam">
                <span><a target="_blank" routerLink="/av-chat/2/1"><i class="fa fa-video-camera"></i></a></span>
                <span><a target="_blank" routerLink="/av-chat/1/1"><i class="fa fa-phone"></i></a></span>
              </div>
            <!-- </div> -->
            <!-- <span id="action_menu_btn"><i class="fa fa-ellipsis-v"></i></span> -->
            <!-- <div class="action_menu">
            </div> -->
            </div>
            <div class="card-body msg_card_body">
              <div class="msg_contailner">
                <div *ngFor="let item of msgs">
                  <div *ngIf="item.from==you['id']">
                      <div *ngIf="item.type=='call'" style="text-align: center; color: white;">
                          ----------------call({{item.timestamp| date: 'h:mm a'}})----------------
                        </div>
                    <div class="d-flex justify-content-start mb-4">
                      <div *ngIf="you['profilePic']!=''" class="img_cont_msg">
                        <img src="http://mysite{{you['profilePic']}}" class="rounded-circle user_img_msg">
                      </div>
                      <div *ngIf="you['profilePic']==''" class="img_cont_msg">
                        <img src="assets/img/sampleuser.png" class="rounded-circle user_img_msg">
                      </div>
                      <div *ngIf="item.type=='text'" class="msg_cotainer">
                        {{item.content}}
                        <span class="msg_time">{{item.timestamp| date: 'h:mm a'}}</span>
                      </div>
                      <!-- <div *ngIf="item.type=='call'" class="msg_cotainer">
                        {{item.content}}
                        <span class="msg_time">{{item.timestamp| date: 'h:mm a'}}</span>
                      </div> -->
                      <div *ngIf="item.type=='image'" class="msg_cotainer pr-0 bg-transparent">
                        <a target="_blank" href="http://mysite{{item.content}}" download>
                        <img style="max-width: 100%; max-height: 80px;" download src="http://mysite{{item.content}}" alt="">
                        </a>
                        <span class="msg_time">{{item.timestamp| date: 'h:mm a'}}</span>
                      </div>
                      <div *ngIf="item.type=='video'" class="msg_cotainer pr-0 bg-transparent">
                        <video width="100%" height="110px;" controls>
                          <source src="http://mysite{{item.content}}" type="video/mp4">
                          <source src="http://mysite{{item.content}}" type="video/ogg">
                          Your browser does not support the video tag.
                        </video>
                        <span class="msg_time">{{item.timestamp| date: 'h:mm a'}}</span>
                      </div>
                      <div *ngIf="item.type=='application'" class="msg_cotainer">
                        
                          <a href="http://mysite{{item.content}}" download style="color: blue;"><i class="fa fa-file-archive-o" aria-hidden="true"></i><span>&nbsp;&nbsp;Download File</span></a>
                        
                        <!-- <a download href="{{item.msg}}" style="color: blue;">Shared a file (Click to download)</a>               -->
                        <span class="msg_time">{{item.timestamp| date: 'h:mm a'}}</span>
                      </div>
                    </div>
                  </div>

                  <div *ngIf="item.from==uid">
                      <div *ngIf="item.type=='call'" style="text-align: center; color: white;">
                        ----------------call({{item.timestamp| date: 'h:mm a'}})----------------
                      </div>

                    <div class="d-flex justify-content-end mb-4">
                      <div *ngIf="item.type=='text'" class="msg_cotainer_send mb-4">
                        {{item.content}}
                        <span class="msg_time_send">{{item.timestamp| date: 'h:mm a'}}</span>
                          <!-- <span class="msg_time_send">{{item.timestamp| date: 'yyyy/MM/dd h:mm:ss a'}}</span> -->
                      </div>
                      
                      <div *ngIf="item.type=='image'" class="msg_cotainer_send pr-0 bg-transparent">
                        <a target="_blank" href="{{item.content}}" download>
                          <img style="max-width: 100%; max-height: 80px;" src="{{item.content}}" alt="">
                        </a>
                        <span class="msg_time_send">{{item.timestamp| date: 'h:mm a'}}</span>
                      </div>
                      <div *ngIf="item.type=='video'" class="msg_cotainer_send pr-0 bg-transparent">
                        <video width="100%" height="110px;" controls>
                          <source src="{{item.content}}" type="video/mp4">
                          <source src="{{item.content}}" type="video/ogg">
                          Your browser does not support the video tag.
                        </video>
                        <span class="msg_time_send">{{item.timestamp| date: 'h:mm a'}}</span>
                      </div>
                      <div *ngIf="item.type=='application'" class="msg_cotainer_send">
                        <div class="" download>
                          <a href="{{item.content}}" style="color: blue;"><i class="fa fa-file-archive-o" aria-hidden="true"></i><span>&nbsp;&nbsp;Uploaded File</span></a>
                          </div>
                        <!-- <a download href="{{item.msg}}" style="color: blue;">Shared a file (Click to download)</a>               -->
                        <span class="msg_time_send">{{item.timestamp.timestamp| date: 'yyyy-MM-dd'}}</span>
                        <!-- <span class="msg_time_send">9:05 AM, Today</span> -->
                      </div>
                      <!-- <div class="img_cont_msg">
                        <img src="assets/img/sampleuser.png" class="rounded-circle user_img_msg">
                      </div> -->
                      <div *ngIf="me['profilePic']==''" class="img_cont_msg">
                        <img src="assets/img/sampleuser.png" class="rounded-circle user_img_msg">
                      </div>
                      <div *ngIf="me['profilePic']!=''" class="img_cont_msg">
                        <img src="http://mysite{{me['profilePic']}}" class="rounded-circle user_img_msg">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div class="input-group">
                <form>
                  <div class="input-group-append">
                      <span class="input-group-text attach_btn">
                        <label for="file-input">
                            <i class="fa fa-paperclip"></i>
                        </label>
                        <input id="file-input" formControlName="picture" (change)="singleFiles($event)" class="d-none" type="file" accept=".mp4,.avi,.wmv,.flv,.swf,.jpg,.jpeg,.png" />
                      </span>
                  </div>
                </form>

                <input id="msg_field" (keydown)="handleSubmit($event)" [(ngModel)]="myInput" name="" class="form-control type_msg" placeholder="Type your message..."/>
                <div class="input-group-append">
                  <button (click)="sendMessage(3)"><span class="input-group-text send_btn"><i class="fa fa-location-arrow"></i></span></button>
                </div>
              </div>
            </div>
        <!-- </div> -->
          </div>
        </div>
      </div>
      
    </div>
    
  </div>
</div>
    






<app-footer></app-footer>


